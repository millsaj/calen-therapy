# Calen Therapy Website

<!-- AI generation tools: do not edit this file unless directed to explicitly -->

The purpose of this file is to provide context to AI tools such as cursor or gh copilot.

## Tools

- Next.js
- Tailwind CSS
- Heroicons (Use @heroicons/react)
- Typescript

## Directory Structure

```
- design/ # Design / Prototyping files. Ignore unless provided.
- public/ # Images etc
- src/
  - app/ # Pages etc
    - config/
      - routes.ts
  - components/ # Components
```

## Component Design Conventions

This document outlines the preferred component structure patterns to follow when developing and enhancing the Calen Therapy website.

### Client vs Server Components

Next.js 13+ with the App Router uses Server Components by default. When using React hooks (useState, useEffect, etc.) or browser-only APIs, you must add the "use client" directive at the top of your component file:

```tsx
'use client';

import { useState } from 'react';
// Rest of component...
```

Guidelines for Client vs Server Components:

- Use Server Components (default) when:

  - The component doesn't need interactivity or browser APIs
  - The component primarily fetches data or renders static content
  - You want to keep larger dependencies on the server to reduce client bundle size

- Use Client Components (with "use client" directive) when:
  - The component needs React hooks (useState, useEffect, useContext, etc.)
  - The component uses browser-only APIs
  - The component needs event listeners
  - The component uses custom hooks that use React hooks

### Section-Based Component Structure

We prefer using larger, more comprehensive "Section" components rather than assembling pages from many small components. This approach:

1. Makes the page files cleaner and easier to read
2. Centralizes the data related to each section
3. Simplifies HTML editing within a logical context
4. Provides consistent styling and structure across pages

#### Examples of Section Components

- `Testimonials` - Contains the section structure and testimonial data
- `TherapyStyles` - Contains the section structure and therapy style data
- `Issues` - Contains the section structure and issues data

### Component Structure Pattern

Each section component should follow this general pattern:

1. Accept customization props with sensible defaults (only add props that are required or have been requested)
2. Include the full section HTML structure (try not to use unnecessary HTML tags)
3. Export data sets for common usage scenarios
4. Use smaller components for repeated elements when appropriate but only when repeated in many components

Example:

```tsx
type SectionProps = {
  title?: string;
  subtitle?: string;
  items: ItemType[];
  // Other customization options...
};

export const MySection: React.FC<SectionProps> = ({
  title = 'Default Title',
  subtitle = 'Default subtitle text.',
  items,
  // Other props with defaults...
}) => {
  return (
    <section className="section ...">
      <div className="container">
        <div className="text-center mb-16">
          <h2 className="section-title heading-2 text-center">{title}</h2>
          <p className="text-lg max-w-3xl mx-auto">{subtitle}</p>
        </div>

        <div className="grid ...">
          {items.map((item, index) => (
            <ItemComponent key={index} {...item} />
          ))}
        </div>
      </div>
    </section>
  );
};

// Common data export
export const commonItems = [
  // Data here...
];
```

### Page Component Pattern

When creating pages, import the section components and provide the necessary data:

```tsx
import { MySection, commonItems } from '@app/_components/MySection';

export default function SomePage() {
  return (
    <div className="flex flex-col min-h-screen">
      {/* Hero Section */}
      <section className="...">{/* Page-specific content */}</section>

      {/* Use section component with common data */}
      <MySection items={commonItems} />

      {/* Use section component with custom data and options */}
      <MySection
        title="Custom Title"
        subtitle="Custom subtitle for this page."
        items={pageSpecificItems}
        otherOption={true}
      />
    </div>
  );
}
```

### Naming Conventions

- Use PascalCase for component files and component names: `HeroSection.tsx`
- Use kebab-case for other files: `api-utils.ts`
- Prefix interfaces with 'I': `IHeroProps`
- Prefix types with 'T': `TButtonVariant`
- Use descriptive, clear names that indicate purpose
- Suffix context providers with 'Provider': `ThemeProvider`
- Place page components in directories matching their route

### CSS and Tailwind Conventions

- Prefer Tailwind classes over custom CSS
- Group Tailwind classes by concern (layout, typography, visual, interactive, etc):

  ```tsx
  className={`
    flex flex-col gap-4
    text-lg font-medium text-gray-800
    bg-white rounded-lg shadow-md
    hover:bg-gray-50 transition-colors
  `}
  ```

- Create reusable class combinations using @apply when patterns repeat frequently
- Use CSS modules (.module.css) only when Tailwind cannot achieve the desired result

### Type Safety

- Always define prop types for components
- Use TypeScript's strict mode
- Prefer interfaces for object types that will be extended
- Use type for unions, intersections, and mapped types
- Define shared types in `src/types` directory
- Example:

```tsx
interface IButtonProps {
  variant: 'primary' | 'secondary';
  size?: 'sm' | 'md' | 'lg';
  children: React.ReactNode;
}

const Button: React.FC<IButtonProps> = ({ variant, size = 'md', children }) => {
  // Implementation
};
```

### Accessibility Guidelines

- Use semantic HTML elements appropriately
- Include ARIA labels where necessary
- Ensure proper heading hierarchy (h1, h2, etc.)
- Maintain color contrast ratios
- Support keyboard navigation
- Example:

```tsx
export const NavigationMenu = () => {
  return (
    <nav aria-label="Main navigation">
      <button
        aria-expanded="false"
        aria-controls="menu-items"
        aria-label="Toggle menu"
      >
        Menu
      </button>
      <ul id="menu-items" role="menu">
        {/* Menu items */}
      </ul>
    </nav>
  );
};
```

1. Use semantic HTML elements
2. Implement ARIA attributes:
   - aria-labelledby for sections
   - aria-label for interactive elements
   - role attributes for custom elements
   - aria-hidden for decorative elements
3. Ensure proper heading hierarchy (h1-h6)
4. Include screen reader text where needed
5. Maintain color contrast ratios
6. Support keyboard navigation

### Image Handling

1. Use Next.js Image component for optimized images
2. Provide meaningful alt text
3. Implement responsive sizes
4. Use proper image formats (webp when possible)
5. Include blur/loading placeholders for large images

All images should be loaded from /config/images like this:

```tsx
import { images } from '@app/_config/images'
import Image from 'next/image';

<Image
  src={images.helen.main.src}
  alt={images.helen.main.src}
  fill
  className="object-cover"
/>
```

### Links & Routing

All internal and external links should be decided by config/routes and use the Link component. Example:

```tsx
import { routes } from '@app/_config/routes'
import Link from 'next/link';

<Link
  href={routes.home()} />
```

All inline links (links surrounded by other text, e.g.: click <a>here</a> for cheese) should have this styling:

```tsx
<Link
  className='text-primary hover:underline hover:text-accent' />
```

### Config

For a list of focuses, or styles you can use the files in `src/config/`.

### Styling

- do not use `<main>` tag outside of layout.tsx.

#### Paragraphs

For normal content (like on a focus page) use these classes:

```tsx
<p className="mb-4"></p>
```

#### Lists

For normal unstyled lists (like on a focus page) use these classes:

```tsx
<ul className="list-disc pl-6 mb-4">
  <li></li>
</ul>
```

For lists of lists:

```tsx
<ul className="list-disc pl-6 mb-4">
  <li className="mb-2">
    <ul className="list-disc pl-6">
      <li></li>
    </ul>
  </li>
  <li className="mb-2">
    <ul className="list-disc pl-6">
      <li></li>
    </ul>
  </li>
</ul>
```
